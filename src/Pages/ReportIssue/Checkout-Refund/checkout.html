<mat-drawer-container class="example-container" style="height:100%">
  <mat-drawer #drawer position="end" style="height:100vh;position:fixed">
    <account-mobile></account-mobile>
  </mat-drawer>
  <mat-drawer-content style="background-color: white">

    <div class="d-lg-block d-none">
      <div class="space" style="background-color: white !important;">
        <nav class="d-lg-inline d-none  navbar navbar-top fixed-top"
             style="background-color: white !important;max-width: 1130px;margin: auto;padding: 0px">
          <div class="h-100 d-flex" style="background-color: white;justify-content: space-between">
            <div class="d-flex">
              <div class="d-flex flex-column" style="align-items: center;margin: auto">
                <div class="navbar-toggler p-0" data-target="#navbarNav"
                     (click)="goBack()"
                     aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                  <Logo-NavBar></Logo-NavBar>
                </div>
              </div>
            </div>
            <div class="d-flex h-100" style="justify-content: flex-end;align-items: center">
              <div class="d-lg-flex d-sm-none account-button"
                   style="display:flex;justify-content: center;align-items: center">
                <account></account>
              </div>
            </div>
          </div>
        </nav>
        <div class="row" style="justify-content: center;margin-top: 16px">
          <div style="vertical-align: middle;width: 636px;margin-right: 135px">
            <h1 class="checkout-title">CHECKOUT</h1>
            <div>
              <div class="customer-Box">
                <h1 class="customer-information">CUSTOMER INFORMATION</h1>

                <form class="example-form">
                  <table class="example-full-width" cellspacing="0">
                    <tr>
                      <td>
                        <mat-form-field class="example-full-width">
                          <mat-label>First name</mat-label>
                          <input matInput [formControl]="nameFormControl"
                                 [(ngModel)]="customerInformation.customerFirstName">
                          <mat-error *ngIf="phoneNumber.hasError('required')">
                            First name is <strong>required</strong>
                          </mat-error>
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field class="example-full-width">
                          <mat-label>Last name</mat-label>
                          <input matInput [formControl]="lastNameFormControl"
                                 [(ngModel)]="customerInformation.customerLastName">
                          <mat-error *ngIf="phoneNumber.hasError('required')">
                            Last name is <strong>required</strong>
                          </mat-error>
                        </mat-form-field>
                      </td>
                    </tr>
                  </table>

                  <table class="example-full-width" cellspacing="0">
                    <tr>
                      <td>
                        <div class="example-full-width" style="margin-bottom: 8px">
                          <mat-label class="phoneNumber">Phone Number</mat-label>
                          <ngx-intl-tel-input
                            [inputId]="'number'"
                            [cssClass]="'flag-code'"
                            [preferredCountries]="preferredCountries"
                            [enableAutoCountrySelect]="true"
                            [enablePlaceholder]="true"
                            [searchCountryFlag]="true"
                            [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]"
                            [selectFirstCountry]="true"
                            [selectedCountryISO]="CountryISO.UnitedStates"
                            [maxLength]="10"
                            [tooltipField]="TooltipLabel.Name"
                            [phoneValidation]="true"
                            [separateDialCode]="separateDialCode"
                            [formControl]="phoneNumber"
                            [(ngModel)]="customerMobile"
                          >
                          </ngx-intl-tel-input>
                        </div>
                      </td>
                      <td>
                        <mat-form-field class="example-full-width" style="margin-top: 11px">
                          <mat-label>Email</mat-label>
                          <input matInput [formControl]="emailFormControl" placeholder="Ex. pat@example.com"
                                 [(ngModel)]="customerInformation.customerEmail">
                          <mat-error
                            *ngIf="emailFormControl.hasError('email') && !emailFormControl.hasError('required')">
                            Please enter a valid email address
                          </mat-error>
                          <mat-error *ngIf="emailFormControl.hasError('required')">
                            Email is <strong>required</strong>
                          </mat-error>
                        </mat-form-field>
                      </td>
                    </tr>
                  </table>

                  <table class="example- full-width" cellspacing="0">
                    <tr>
                      <td>
                        <mat-form-field class="example-full-width">
                          <mat-label>Address</mat-label>
                          <input matInput placeholder="Ex. 100 Main St"
                                 [(ngModel)]="customerInformation.customerAdresses.customerAddress1"
                                 [formControl]="addressFormControl">
                          <mat-error *ngIf="nameFormControl.hasError('required')">
                            Address is <strong>required</strong>
                          </mat-error>
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field class="example-full-width">
                          <mat-label>Address 2</mat-label>
                          <input
                            [formControl]="address2FormControl"
                            [(ngModel)]="customerInformation.customerAdresses.customerAddress2"
                            matInput placeholder="">
                        </mat-form-field>
                      </td>
                    </tr>
                  </table>
                  <table class="example-full-width" cellspacing="0" style="justify-content: space-between">
                    <tr>
                      <td>
                        <mat-form-field>
                          <mat-label>City</mat-label>
                          <input matInput
                                 [formControl]="cityFormControl"
                                 [(ngModel)]="customerInformation.customerAdresses.customerCity"
                                 placeholder="Ex. San Francisco">
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field>
                          <mat-label>State</mat-label>
                          <input
                            [formControl]="stateFormControl"
                            [(ngModel)]="customerInformation.customerAdresses.customerState"
                            matInput placeholder="Ex. California">
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field>
                          <mat-label>Postal Code</mat-label>
                          <input matInput #postalCode maxlength="5"
                                 [formControl]="postalFormControl"
                                 [(ngModel)]="customerInformation.customerAdresses.customerZip"
                                 placeholder="Ex. 94105">
                          <mat-hint align="end">{{postalCode.value.length}} / 5</mat-hint>
                        </mat-form-field>
                      </td>
                    </tr>
                  </table>

                  <table class="example-full-width" cellspacing="0">
                    <tr>
                      <td>
                        <mat-form-field class="example-full">
                          <mat-label>Contact Name</mat-label>
                          <input matInput placeholder="Brian Bermudez">
                        </mat-form-field>
                      </td>
                    </tr>
                  </table>

                  <table class="example-full" cellspacing="0">
                    <tr>
                      <td>
                        <mat-form-field class="textArea-" appearance="outline">
                  <textarea #notes maxlength="200"
                            (change)="updateNotes(notes.value)"
                            placeholder=" Add a note for the restaurant."
                            matInput></textarea>
                          <mat-hint align="end">{{notes.value.length}} / 200</mat-hint>
                        </mat-form-field>
                      </td>
                    </tr>
                  </table>
                </form>
              </div>

              <div [hidden]="!(this.refundCartDifference() > 0)" class="payments" id="payments">
                <h1 class="tips-title">PAYMENTS</h1>
                <div class="tip-box">
                  <div class="payment-selected">
                    <img width="30" height="30" src="../../../assets/IconsSVG/payments/addPayment.svg" alt="">
                  </div>
                  <div *ngIf="canPaymentRequest && applePaymentRequest" (click)="showPaymentRequest()"
                       class="payment-option">
                    <img width="30" height="30" src="../../../assets/IconsSVG/payments/Apple-15px.svg" alt="">
                  </div>
                  <div *ngIf="canPaymentRequest && !applePaymentRequest" (click)="showPaymentRequest()"
                       class="payment-option">
                    <img width="30" height="30" src="../../../assets/IconsSVG/payments/Google-15px.svg" alt="">
                  </div>
                </div>

                <table class="example-full-width mt-4 mb-4" cellspacing="0">
                  <tr>
                    <td>
                      <div class="example-full">
                        <mat-label class="card-titles ml-1">Card Number</mat-label>
                        <div #cardNumber style="width: 200px;" id="card-number"></div>
                      </div>
                    </td>
                    <td>
                      <div class="example-full ml-4">
                        <mat-label class="card-titles ml-1">MM/YY</mat-label>
                        <div #cardExpiry style="width: 150px" id="card-expiry"></div>
                      </div>
                    </td>
                    <td>
                      <div class="example-full">
                        <mat-label class="card-titles ml-1">CVC</mat-label>
                        <div #cardCvc style="width: 100px" id="card-cvc"></div>
                      </div>
                    </td>
                  </tr>
                </table>
              </div>

              <div class="mt-3" id="buttonCheckout">
                <button [disabled]="disabledButton" (click)="placeOrder()" class="checkout-button">
                  PLACE ORDER
                </button>
              </div>
            </div>
          </div>
          <div style="width: 350px">
            <your-order-checkout-refund [paymentInfo]="paymentInfo" [orderType]="currentOrderType" [tips]="tipSelected" style="width: 100%"></your-order-checkout-refund>
          </div>
        </div>
      </div>
    </div>

    <div class="d-sm-block d-lg-none">
      <div class="space" style="background-color: white !important;">
        <nav class="space d-lg-inline   navbar navbar-top fixed-top topbar"
             style="background-color: white !important;">
          <div class="w-100 h-100 d-flex justify-content-between" style="background-color: white;">
            <div class="d-flex">
              <div class="d-flex flex-column" style="align-items: center;margin: auto">
                <div class="navbar-toggler p-0" data-target="#navbarNav"
                     (click)="goBack()"
                     aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                  <Logo-NavBar></Logo-NavBar>
                </div>
              </div>
            </div>
            <div class="d-flex h-100 w-75" style="justify-content: flex-end;align-items: center">
              <div class="d-lg-none d-sm-flex" style="display:flex;justify-content: center;align-items: center">
                <img *ngIf="customer.length === 0 "
                     (click)="drawer.toggle()" src="../../../assets/IconsSVG/Account.svg" alt="">
                <div *ngIf="customer.length !== 0" (click)="drawer.toggle()">
                  <img *ngIf="customer.customerPhoto"
                       height="32" width="32" style="border-radius: 50%;border: 1px solid #000000"
                       [src]="getCustomerPhoto()" alt="">
                  <img *ngIf="!customer.customerPhoto"
                       height="32" width="32" style="border-radius: 50%;"
                       src="../../../assets/IconsSVG/Account.svg" alt="">
                </div>
              </div>

            </div>
          </div>
        </nav>

        <div style="margin-top: 80px">
          <div class="mx-2">
            <your-order-checkout-refund [paymentInfo]="paymentInfo" [orderType]="currentOrderType" [tips]="tipSelected"
                                        style="width: 100%"></your-order-checkout-refund>
          </div>
          <div id="customer information" class="mx-3">
            <div class="customer-Box">
              <h1 class="customer-information">CUSTOMER INFORMATION</h1>

              <div class="example-form">
                <table class="example-full-mobile" cellspacing="0">
                  <tr>
                    <td>
                      <mat-form-field class="example-full-width">
                        <mat-label>First name</mat-label>
                        <input matInput [formControl]="nameFormControl"
                               [(ngModel)]="customerInformation.customerFirstName">
                        <mat-error *ngIf="phoneNumber.hasError('required')">
                          First name is <strong>required</strong>
                        </mat-error>
                      </mat-form-field>
                    </td>
                    <td>
                      <mat-form-field class="example-full-width">
                        <mat-label>Last name</mat-label>
                        <input matInput [formControl]="lastNameFormControl"
                               [(ngModel)]="customerInformation.customerLastName">
                        <mat-error *ngIf="phoneNumber.hasError('required')">
                          Last name is <strong>required</strong>
                        </mat-error>
                      </mat-form-field>
                    </td>
                  </tr>
                </table>

                <table class="example-full-mobile" cellspacing="0">
                  <tr>
                    <td>
                      <div style="width: 100%;margin-bottom: 15px;">
                        <mat-label class="phoneNumber">Phone Number</mat-label>
                        <ngx-intl-tel-input
                          [cssClass]="'flag-code'"
                          [(ngModel)]="customerInformation.customerMobile"
                          [preferredCountries]="preferredCountries"
                          [enableAutoCountrySelect]="true"
                          [enablePlaceholder]="true"
                          [searchCountryFlag]="true"
                          [searchCountryField]="[SearchCountryField.Iso2, SearchCountryField.Name]"
                          [selectFirstCountry]="true"
                          [selectedCountryISO]="CountryISO.UnitedStates"
                          [maxLength]="10"
                          [tooltipField]="TooltipLabel.Name"
                          [phoneValidation]="true"
                        ></ngx-intl-tel-input>
                      </div>
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <mat-form-field style="width: 100%;">
                        <mat-label>Email</mat-label>
                        <input matInput [formControl]="emailFormControl" placeholder="Ex. pat@example.com"
                               [(ngModel)]="customerInformation.customerEmail">
                        <mat-error *ngIf="emailFormControl.hasError('email') && !emailFormControl.hasError('required')">
                          Please enter a valid email address
                        </mat-error>
                        <mat-error *ngIf="emailFormControl.hasError('required')">
                          Email is <strong>required</strong>
                        </mat-error>
                      </mat-form-field>
                    </td>
                  </tr>
                </table>

                <table class="example-full-mobile" cellspacing="0">
                  <tr>
                    <td>
                      <mat-form-field style="width: 100%">
                        <mat-label>Address</mat-label>
                        <input matInput placeholder="Ex. 100 Main St"
                               [(ngModel)]="customerInformation.customerAdresses.customerAddress1"
                               [formControl]="addressFormControl">
                        <mat-error *ngIf="nameFormControl.hasError('required')">
                          Address is <strong>required</strong>
                        </mat-error>
                      </mat-form-field>
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <mat-form-field style="width: 100%;">
                        <mat-label>Address 2</mat-label>
                        <input
                          [(ngModel)]="customerInformation.customerAdresses.customerAddress2"
                          [formControl]="address2FormControl"
                          matInput placeholder="">
                      </mat-form-field>
                    </td>
                  </tr>
                </table>


                <table class="example-full-width" cellspacing="0">
                  <tr>
                    <td>
                      <mat-form-field class="example-full">
                        <mat-label>City</mat-label>
                        <input
                          [(ngModel)]="customerInformation.customerAdresses.customerCity"
                          [formControl]="cityFormControl"
                          matInput placeholder="Ex. San Francisco">
                      </mat-form-field>
                    </td>
                    <td>
                      <mat-form-field class="example-full">
                        <mat-label>State</mat-label>
                        <input
                          [(ngModel)]="customerInformation.customerAdresses.customerState"
                          [formControl]="stateFormControl"
                          matInput placeholder="Ex. California">
                      </mat-form-field>
                    </td>
                    <td>
                      <mat-form-field class="example-full">
                        <mat-label>Postal Code</mat-label>
                        <input
                          [(ngModel)]="customerInformation.customerAdresses.customerZip"
                          [formControl]="postalFormControl"
                          matInput #postalCode maxlength="5" placeholder="Ex. 94105">
                        <mat-hint align="end">{{postalCode.value.length}} / 5</mat-hint>
                      </mat-form-field>
                    </td>
                  </tr>
                </table>

                <table class="example-full-width" cellspacing="0">
                  <tr>
                    <td>
                      <mat-form-field class="example-full">
                        <mat-label>Contact Name</mat-label>
                        <input matInput placeholder="Brian Bermudez">
                      </mat-form-field>
                    </td>
                  </tr>
                </table>

                <table style="width: 100%" cellspacing="0">
                  <tr>
                    <td>
                      <mat-form-field class="textArea" appearance="outline">
                  <textarea #notes maxlength="200"
                            (change)="updateNotes(notes.value)"
                            placeholder=" Add a note for the restaurant."
                            matInput></textarea>
                        <mat-hint align="end">{{notes.value.length}} / 200</mat-hint>
                      </mat-form-field>
                    </td>
                  </tr>
                </table>
              </div>
            </div>
          </div>

          <div [hidden]="!(this.refundCartDifference() > 0)" class="payments my-3 mx-3" id="payments-Mobile">
            <h1 class="tips-title">PAYMENTS</h1>
            <div class="tip-box">
              <div class="payment-selected">
                <img width="30" height="30" src="../../../assets/IconsSVG/payments/addPayment.svg" alt="">
              </div>
              <div *ngIf="canPaymentRequest && applePaymentRequest" (click)="showPaymentRequest()"
                   class="payment-option">
                <img width="30" height="30" src="../../../assets/IconsSVG/payments/Apple-15px.svg" alt="">
              </div>
              <div *ngIf="canPaymentRequest && !applePaymentRequest" (click)="showPaymentRequest()"
                   class="payment-option">
                <img width="30" height="30" src="../../../assets/IconsSVG/payments/Google-15px.svg" alt="">
              </div>
            </div>
            <table class="w-100 mt-3">
              <tr>
                <td>
                  <div style="width: 100%;">
                    <mat-label class="card-titles ml-1">Card Number</mat-label>
                    <div style="width: 100%" id="cardNumber2"></div>
                  </div>
                </td>
              </tr>
            </table>
            <table class="example-full-width mt-4 mb-4" cellspacing="0">
              <tr class="mt-3">
                <td>
                  <div>
                    <mat-label class="mt-3 card-titles ml-1">MM/YY</mat-label>
                    <div style="width: 200px" id="cardExpiry2"></div>
                  </div>
                </td>
                <td>
                  <div>
                    <mat-label class="mt-3 card-titles ml-1">CVC</mat-label>
                    <div style="width: 100px" id="cardCvc2"></div>
                  </div>
                </td>
              </tr>
            </table>
          </div>

          <div class="mt-3 px-3">
            <button (click)="placeOrder()"
                    [disabled]="disabledButton"
                    [ngClass]="customerInformation.customerEmail === '' ? 'checkout-button-disabled' : 'checkout-button'">
              PLACE ORDER
            </button>
          </div>

        </div>
      </div>


    </div>

  </mat-drawer-content>
</mat-drawer-container>


<div class="modal" style="background-color: #FBFBFB" *ngIf="loading === true">
  <div>
    <loading></loading>
    <p
      class=" loading-text ml-2 d-flex justify-content-center align-items-center align-content-center"> {{checkoutProcess}}</p>
  </div>
</div>
<app-footer appConditionalFooter></app-footer>
